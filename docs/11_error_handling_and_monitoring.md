# エラー処理とモニタリング

## API エラーハンドリング設計

- 各 API レスポンスは、エラー時にも一賛したフォーマットを返すべき。
- 成功時・失敗時で以下のような統一レスポンスを定義する。

```json
{
  "success": false,
  "error": {
    "code": "RESOURCE_NOT_FOUND",
    "message": "指定されたリソースが見つかりませんでした。"
  }
}
```

- HTTP ステータスコードも正しく使い分ける
  - 200: 正常
  - 400: バリデーションエラー
  - 401: 認証エラー
  - 403: 許可エラー
  - 404: リソース未存在
  - 500: サーバエラー

## エラーロギング・モニタリング方針

| 項目         | 方法                                                |
| :----------- | :-------------------------------------------------- |
| ログ出力     | Vercel Functions の標準ログに出力                   |
| モニタリング | 必要に応じて Sentry など外部サービス導入            |
| 通知設定     | 致命的エラーのみ Slack やメールに通知する設計も検討 |

## 最初に決めること

- エラーコード一覧
- ユーザー向けエラーメッセージパターン
- モニタリングツール導入タイミング（MVP 時点では後回し可）

## まとめ

- 全体として、最初のドキュメントは非常に高品質
- 今回の改訂で、「エラー設計」「モニタリング」を補いました
- このまま **API エラー一覧テンプレート** を作るとさらに堅露になります